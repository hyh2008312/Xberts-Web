angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs","$timeout",function(a,b,c){"use strict";var d,e=a.summernoteConfig||{};if(angular.isDefined(b.height)&&(e.height=+b.height),angular.isDefined(b.minHeight)&&(e.minHeight=+b.minHeight),angular.isDefined(b.maxHeight)&&(e.maxHeight=+b.maxHeight),angular.isDefined(b.placeholder)&&(e.placeholder=b.placeholder),angular.isDefined(b.focus)&&(e.focus=!0),angular.isDefined(b.airmode)&&(e.airMode=!0),angular.isDefined(b.lang)){if(!angular.isDefined($.summernote.lang[b.lang]))throw new Error('"'+b.lang+'" lang file must be exist.');e.lang=b.lang}var f={};f.onInit=a.init,f.onEnter=function(b){a.enter({evt:b})},f.onFocus=function(b){a.focus({evt:b})},f.onPaste=function(b){a.paste({evt:b})},f.onKeyup=function(b){a.keyup({evt:b})},f.onKeydown=function(b){a.keydown({evt:b})},angular.isDefined(b.onImageUpload)&&(f.onImageUpload=function(b){a.imageUpload({files:b,editable:a.editable})}),angular.isDefined(b.onMediaDelete)&&(f.onMediaDelete=function(b){var c={attrs:{}};c.tagName=b[0].tagName,angular.forEach(b[0].attributes,function(a){c.attrs[a.name]=a.value}),a.mediaDelete({target:c})}),this.activate=function(g,h,i){var j=function(){var a=h.summernote("code");h.summernote("isEmpty")&&(a=""),i&&i.$viewValue!==a&&c(function(){i.$setViewValue(a)},0)};f.onChange=function(b){c(function(){h.summernote("isEmpty")&&(b=""),j()},0),a.change({contents:b,editable:a.editable})},f.onBlur=function(b){!e.airMode&&h.blur(),a.blur({evt:b})},e.callbacks=f,h.summernote(e);var k,l=h.next(".note-editor");l.find(".note-toolbar").click(function(){j(),l.hasClass("codeview")?(l.on("keyup",j),i&&(k=g.$watch(function(){return i.$modelValue},function(a){l.find(".note-codable").val(a)}))):(l.off("keyup",j),angular.isFunction(k)&&k())}),i&&(i.$render=function(){i.$viewValue?h.summernote("code",i.$viewValue):h.summernote("empty")}),angular.isDefined(b.editable)&&(a.editable=l.find(".note-editable")),angular.isDefined(b.editor)&&(a.editor=h),d=h,h.on("$destroy",function(){h.summernote("destroy"),a.summernoteDestroyed=!0})},a.$on("$destroy",function(){a.summernoteDestroyed||d.summernote("destroy")})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:"element",replace:!0,require:["summernote","?ngModel"],controller:"SummernoteController",scope:{summernoteConfig:"=config",editable:"=",editor:"=",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",paste:"&onPaste",keyup:"&onKeyup",keydown:"&onKeydown",change:"&onChange",imageUpload:"&onImageUpload",mediaDelete:"&onMediaDelete"},template:'<div class="summernote"></div>',link:function(a,b,c,d,e){var f=d[0],g=d[1];e(a,function(a,c){b.append(a.html())}),f.activate(a,b,g)}}}]);