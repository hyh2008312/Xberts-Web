<div class="xb-main-deals xb-overflow-hidden" ng-if="isMobile"
     md-swipe-left="onSwipeLeft()" md-swipe-right="onSwipeRight()">
  <div ng-repeat="item in deals track by $index">
    <div class="xb-deals-list__img-bg xb-main-deals__img-bg">
      <a layout="column" layout-align="start center" hide-xs ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        <img src="{{item.getFixedImageUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div end-time-left end-time="item.promotionEnd" extraInfo="Expired" ng-if="item.promotionEnd">
          <div ng-show="timeValue>0" class="xb-deals-list__top-right" layout="row" layout-align="start center">
            <span >{{ timeUnit }}</span>
          </div>
          <div ng-show="timeValue<=0" class="xb-deals-list__top-right xb-deals-list__expired"
               layout="row" layout-align="start center">
            <span >Expired</span>
          </div>
        </div>
      </a>
      <a layout="column" layout-align="start center" hide-gt-xs ng-if="user.isAuth()" ui-sref="application.dealsDetail({dealsId:item.id})">
        <img src="{{item.getFixedSqrUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div end-time-left end-time="item.promotionEnd" extraInfo="Expired" ng-if="item.promotionEnd">
          <div ng-show="timeValue>0" class="xb-deals-list__top-right" layout="row" layout-align="start center">
            <span >{{ timeUnit }}</span>
          </div>
          <div ng-show="timeValue<=0" class="xb-deals-list__top-right xb-deals-list__expired"
               layout="row" layout-align="start center">
            <span >Expired</span>
          </div>
        </div>
      </a>
      <a layout="column" layout-align="start center" hide-gt-xs ng-if="!user.isAuth()" ng-click="openMobileDialog(item.id);">
        <img src="{{item.getFixedSqrUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div class="xb-deals-list__top-right">
          <span end-time-left end-time="item.promotionEnd" extraInfo="Expired">
            <span ng-show="timeValue>0">{{ timeUnit }}</span>
            <span ng-show="timeValue<=0">00:00:00</span>
          </span>
        </div>
      </a>
    </div>
    <div class="xb-deals-list__content xb-deals-list__content-1" layout="column" layout-align="stretch start">
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-xs
         ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        {{item.title}}
      </a>
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-gt-xs ng-if="user.isAuth()"
         ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        {{item.title}}
      </a>
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-gt-xs ng-if="!user.isAuth()"
         ng-click="openMobileDialog(item.id);">
        {{item.title}}
      </a>
      <div class="xb-deals-list__tags xb-deals-list__fixed-height md-margin-bottom-1">
        {{item.tags}}
      </div>
      <div>
         <span class="md-headline xb-bold">
          {{item.salePrice.amount | worldCurrency:item.salePrice.currency}}
        </span>
      </div>
      <div class="xb-deals-list__price md-margin-bottom-2" layout="row" layout-align="start center" layout-wrap>
        <span class="md-dark-secondary" ng-if="item.originalPrice.amount>0">
          {{item.originalPrice.amount | worldCurrency:item.originalPrice.currency}}
        </span>
        <span class="xb-deals-list__discount" ng-if="item.discount > 0">
          {{item.discount * 100 | number:0}}% OFF
        </span>
      </div>
    </div>
  </div>
</div>
<div class="xb-main-deals" ng-if="!isMobile">
  <div ng-repeat="item in deals track by $index">
    <div class="xb-deals-list__img-bg xb-main-deals__img-bg">
      <a layout="column" layout-align="start center" hide-xs ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        <img src="{{item.getFixedImageUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div end-time-left end-time="item.promotionEnd" extraInfo="Expired" ng-if="item.promotionEnd">
          <div ng-show="timeValue>0" class="xb-deals-list__top-right" layout="row" layout-align="start center">
            <span >{{ timeUnit }}</span>
          </div>
          <div ng-show="timeValue<=0" class="xb-deals-list__top-right xb-deals-list__expired"
               layout="row" layout-align="start center">
            <span >Expired</span>
          </div>
        </div>
      </a>
      <a layout="column" layout-align="start center" hide-gt-xs ng-if="user.isAuth()" ui-sref="application.dealsDetail({dealsId:item.id})">
        <img src="{{item.getFixedSqrUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div end-time-left end-time="item.promotionEnd" extraInfo="Expired" ng-if="item.promotionEnd">
          <div ng-show="timeValue>0" class="xb-deals-list__top-right" layout="row" layout-align="start center">
            <span >{{ timeUnit }}</span>
          </div>
          <div ng-show="timeValue<=0" class="xb-deals-list__top-right xb-deals-list__expired"
               layout="row" layout-align="start center">
            <span >Expired</span>
          </div>
        </div>
      </a>
      <a layout="column" layout-align="start center" hide-gt-xs ng-if="!user.isAuth()" ng-click="openMobileDialog(item.id);">
        <img src="{{item.getFixedSqrUrl()}}" title="{{item.title}}"/>
        <div ng-if="item.getVideo() != null" class="xb-main-discover__image-button-bg" layout="row" layout-align="center center">
          <div class="xb-main-discover__image-button" layout="row" layout-align="center center">
            <md-icon >play_arrow</md-icon>
          </div>
        </div>
        <div class="xb-deals-list__mask animation-opacity-show" layout="column" layout-align="center center" hide-xs>
          <div class="md-subhead">Quick Look</div>
        </div>
        <div class="xb-deals-list__top-right">
          <span end-time-left end-time="item.promotionEnd" extraInfo="Expired">
            <span ng-show="timeValue>0">{{ timeUnit }}</span>
            <span ng-show="timeValue<=0">00:00:00</span>
          </span>
        </div>
      </a>
    </div>
    <div class="xb-deals-list__content xb-deals-list__content-1" layout="column" layout-align="stretch start">
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-xs
         ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        {{item.title}}
      </a>
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-gt-xs ng-if="user.isAuth()"
         ui-sref="application.dealsDetail({dealsId:item.id})" target="_blank">
        {{item.title}}
      </a>
      <a class="xb-deals-list__title xb-deals-list__fixed-height md-dark-secondary" hide-gt-xs ng-if="!user.isAuth()"
         ng-click="openMobileDialog(item.id);">
        {{item.title}}
      </a>
      <div class="xb-deals-list__tags xb-deals-list__fixed-height md-margin-bottom-1">
        {{item.tags}}
      </div>
      <div>
        <span class="md-headline xb-bold">
          {{item.salePrice.amount | worldCurrency:item.salePrice.currency}}
        </span>
      </div>
      <div class="xb-deals-list__price md-margin-bottom-2" layout="row" layout-align="start center" layout-wrap>
        <span class="md-dark-secondary" ng-if="item.originalPrice.amount>0">
          {{item.originalPrice.amount | worldCurrency:item.originalPrice.currency}}
        </span>
        <span class="xb-deals-list__discount" ng-if="item.discount > 0">
          {{item.discount * 100 | number:0}}% OFF
        </span>
      </div>
    </div>
  </div>
</div>
